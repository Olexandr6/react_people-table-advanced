(this["webpackJsonpreact_people-table-advanced"]=this["webpackJsonpreact_people-table-advanced"]||[]).push([[0],{22:function(e,t,a){},24:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){"use strict";a.r(t);var n=a(14),c=a.n(n),r=a(5),s=a(1),o=a.n(s),l=(a(22),a(2)),i=a(6),u=a.n(i),j=a(0),b=o.a.memo((function(){return Object(j.jsxs)("ul",{className:"nav nav-tabs justify-content-center",children:[Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsx)(r.b,{className:function(e){var t=e.isActive;return u()("nav-link",{active:t})},to:"/",children:"Home"})}),Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsx)(r.b,{className:function(e){var t=e.isActive;return u()("nav-link",{active:t})},to:"/people",children:"People"})})]})})),d=(a(24),o.a.memo((function(){return Object(j.jsx)("h1",{className:"title",children:"Home page"})}))),m=a(3),h=a(15),p=a.n(h),O=(a(36),o.a.memo((function(e){var t=e.person,a=e.mother,n=e.father,c=Object(l.f)("/people/:slug"),s=null===c||void 0===c?void 0:c.params.slug,o=Object(l.e)();return Object(j.jsxs)("tr",{className:u()("person",{person__selected:s===t.slug}),children:[Object(j.jsx)("td",{children:Object(j.jsx)(r.b,{to:{pathname:"/people/".concat(t.slug),search:o.search},className:u()("person",{person__male:"m"===t.sex,person__female:"f"===t.sex}),children:t.name})}),Object(j.jsx)("td",{children:t.sex}),Object(j.jsx)("td",{children:t.born}),Object(j.jsx)("td",{children:t.died}),Object(j.jsx)("td",{children:a?Object(j.jsx)(r.b,{to:{pathname:"/people/".concat(t.slug),search:o.search},className:u()({person__male:"m"===t.sex,person__female:"f"===t.sex}),children:a.name}):Object(j.jsx)("span",{className:"person__parent",children:t.motherName})}),Object(j.jsx)("td",{children:n?Object(j.jsx)(r.b,{to:{pathname:"/people/".concat(t.slug),search:o.search},className:u()({person__male:"m"===t.sex,person__female:"f"===t.sex}),children:n.name}):Object(j.jsx)("span",{className:"person__parent",children:t.fatherName})})]})}))),f=(a(37),o.a.memo((function(e){var t=e.people,a=Object(r.c)(),n=Object(m.a)(a,2),c=n[0],s=n[1],o=c.get("query")||"",l=c.get("sortBy")||"",i=c.get("sortOrder")||"",b=function(e){var t,a=null===(t=e.currentTarget.textContent)||void 0===t?void 0:t.toLowerCase();a&&""===i&&s({query:o,sortBy:a,sortOrder:"asc"}),a&&"desc"===i&&s({query:o,sortBy:a,sortOrder:"asc"}),a&&"asc"===i&&s({query:o,sortBy:a,sortOrder:"desc"})},d=function(e){return t.find((function(t){return t.name===e}))};return Object(j.jsxs)("table",{className:"table table-hover",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{onClick:b,className:u()("table__sort",{"table__sort--asc":"name"===l&&"asc"===i,"table__sort--desc":"name"===l&&"desc"===i}),children:"Name"}),Object(j.jsx)("th",{onClick:b,className:u()("table__sort",{"table__sort--asc":"sex"===l&&"asc"===i,"table__sort--desc":"sex"===l&&"desc"===i}),children:"Sex"}),Object(j.jsx)("th",{onClick:b,className:u()("table__sort",{"table__sort--asc":"born"===l&&"asc"===i,"table__sort--desc":"born"===l&&"desc"===i}),children:"Born"}),Object(j.jsx)("th",{onClick:b,className:u()("table__sort",{"table__sort--asc":"died"===l&&"asc"===i,"table__sort--desc":"died"===l&&"desc"===i}),children:"Died"}),Object(j.jsx)("th",{children:"Mother"}),Object(j.jsx)("th",{children:"Father"})]})}),Object(j.jsx)("tbody",{children:t.map((function(e){return Object(j.jsx)(O,{person:e,father:d(e.fatherName),mother:d(e.motherName)},e.slug)}))})]})}))),x=a(16),v=a(10),_=a.n(v),N=function(){var e=Object(x.a)(_.a.mark((function e(){var t;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://mate-academy.github.io/react_people-table/api/people.json");case 2:return t=e.sent,e.abrupt("return",t.json());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=o.a.createContext({people:[],setPeople:function(){}}),y=function(e){var t=e.children,a=Object(s.useState)([]),n=Object(m.a)(a,2),c=n[0],r=n[1];Object(s.useEffect)((function(){N().then((function(e){return r(e)}))}),[]);var o={people:c,setPeople:r};return Object(j.jsx)(g.Provider,{value:o,children:t})},C=(a(39),o.a.memo((function(){var e=Object(s.useContext)(g).people,t=Object(r.c)(),a=Object(m.a)(t,2),n=a[0],c=a[1],o=n.get("sortBy")||"",i=n.get("sortOrder")||"",u=n.get("query")||"",b=Object(s.useState)(u),d=Object(m.a)(b,2),h=d[0],O=d[1],x=Object(l.g)(),v=function(){var t=null===u||void 0===u?void 0:u.toLowerCase();return t?e.filter((function(e){var a,n;return e.name.toLowerCase().includes(t)||(null===(a=e.motherName)||void 0===a?void 0:a.toLowerCase().includes(t))||(null===(n=e.fatherName)||void 0===n?void 0:n.toLowerCase().includes(t))})):e},_=Object(s.useCallback)(p()((function(e){c(e||o||i?{query:e,sortBy:o,sortOrder:i}:{})}),500),[c,o,i]);return Object(j.jsxs)("div",{className:"container",children:[Object(j.jsxs)("div",{className:"inputs",children:[Object(j.jsx)("input",{className:"form-control",type:"text","data-cy":"filterInput",placeholder:"Enter person name",value:h||"",onChange:function(e){_(e.target.value.toLowerCase()),O(e.target.value)}}),Object(j.jsx)("button",{className:"btn btn-outline-info",type:"button",onClick:function(){return x("/people/new")},children:"Add a new person"})]}),Object(j.jsx)(f,{people:function(){switch(o){case"name":case"sex":return v().sort((function(e,t){return"asc"===i?e[o].localeCompare(t[o]):t[o].localeCompare(e[o])}));case"born":case"died":return v().sort((function(e,t){return"asc"===i?Number(e[o])-Number(t[o]):Number(t[o])-Number(e[o])}));default:return v()}}()})]})}))),w=a(17),k=(a(40),o.a.memo((function(){var e=Object(s.useContext)(g),t=e.people,a=e.setPeople,n=Object(s.useState)(""),c=Object(m.a)(n,2),r=c[0],o=c[1],i=Object(s.useState)(""),u=Object(m.a)(i,2),b=u[0],d=u[1],h=Object(s.useState)(0),p=Object(m.a)(h,2),O=p[0],f=p[1],x=Object(s.useState)(0),v=Object(m.a)(x,2),_=v[0],N=v[1],y=Object(s.useState)(""),C=Object(m.a)(y,2),k=C[0],S=C[1],B=Object(s.useState)(""),q=Object(m.a)(B,2),A=q[0],L=q[1],P=Object(s.useState)(!1),D=Object(m.a)(P,2),E=D[0],F=D[1],T=Object(s.useState)(!1),H=Object(m.a)(T,2),I=H[0],J=H[1],M=Object(s.useState)(!1),Y=Object(m.a)(M,2),z=Y[0],Z=Y[1],$=Object(l.g)(),G=/^[a-zA-Z ]{3,30}$/;Object(s.useEffect)((function(){_&&O&&Z(_-O>=150)}),[O,_]);var K=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1400;return t.filter((function(t){return t.sex===e&&t.born<=a-18&&t.died>=a+1}))};return Object(j.jsx)("div",{className:"container",children:Object(j.jsxs)("form",{className:"form",onSubmit:function(e){e.preventDefault();var n="".concat(r.split(" ").join("-"),"-").concat(O),c={name:r,sex:b,born:O,died:_,fatherName:k,motherName:A,slug:n};a([].concat(Object(w.a)(t),[c])),o(""),d(""),f(0),N(0),S(""),L(""),$("/people/")},children:[Object(j.jsxs)("label",{className:"form__field",children:[Object(j.jsx)("input",{className:"form-control",type:"text",placeholder:"Name",value:r,onChange:function(e){o(e.target.value),F(!1)},onBlur:function(e){!function(e){var t=e.target.value;F(!t.length)}(e),J(r.length>0&&!G.test(r))}}),E&&Object(j.jsx)("span",{className:"form__error",children:"Name field if required"}),I&&Object(j.jsx)("span",{className:"form__error",children:"The name can contain only letters and spaces and be between 3 and 30 characters long"})]}),Object(j.jsxs)("label",{className:"form__radio",children:["Male",Object(j.jsx)("input",{required:!0,type:"radio",name:"sex",value:"m",checked:"m"===b,onChange:function(e){return d(e.target.value)},className:"form-check-input mt-0"})]}),Object(j.jsxs)("label",{className:"form__radio",children:["Female",Object(j.jsx)("input",{required:!0,type:"radio",name:"sex",value:"f",checked:"f"===b,onChange:function(e){return d(e.target.value)},className:"form-check-input mt-0"})]}),Object(j.jsx)("label",{className:"form__field",children:Object(j.jsx)("input",{type:"number",placeholder:"Born year",value:O,min:1400,max:(new Date).getFullYear(),onChange:function(e){return f(Number(e.target.value))},className:"form-control"})}),Object(j.jsxs)("label",{children:[Object(j.jsx)("input",{type:"number",placeholder:"Death year",disabled:!O,value:_,min:O,max:(new Date).getFullYear(),onChange:function(e){return N(Number(e.target.value))},className:"form-control"}),z&&Object(j.jsx)("span",{className:"form__error",children:"The life period of a person should be less than 150 years"})]}),Object(j.jsx)("label",{children:Object(j.jsxs)("select",{disabled:!O,value:k,onChange:function(e){return S(e.target.value)},className:"form-select",children:[Object(j.jsx)("option",{value:"",disabled:!0,children:"Choose a father"}),K("m",O).map((function(e){return Object(j.jsx)("option",{value:e.name,children:e.name},e.slug)}))]})}),Object(j.jsx)("label",{children:Object(j.jsxs)("select",{disabled:!O,value:A,onChange:function(e){return L(e.target.value)},className:"form-select",children:[Object(j.jsx)("option",{value:"",disabled:!0,children:"Choose a mother"}),K("f",O).map((function(e){return Object(j.jsx)("option",{value:e.name,children:e.name},e.slug)}))]})}),Object(j.jsx)("button",{className:"btn btn-outline-success",type:"submit",children:"Add a new person"})]})})}))),S=function(){return Object(j.jsx)(y,{children:Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)(b,{}),Object(j.jsxs)(l.c,{children:[Object(j.jsx)(l.a,{path:"/",element:Object(j.jsx)(d,{})}),Object(j.jsx)(l.a,{path:"/people",element:Object(j.jsx)(C,{})}),Object(j.jsx)(l.a,{path:"/people/:slug",element:Object(j.jsx)(C,{})}),Object(j.jsx)(l.a,{path:"/people/new",element:Object(j.jsx)(k,{})}),Object(j.jsx)(l.a,{path:"*",element:Object(j.jsx)("h1",{children:"Error 404: Page not found"})})]})]})})};c.a.render(Object(j.jsx)(r.a,{children:Object(j.jsx)(S,{})}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.aff2ec0e.chunk.js.map